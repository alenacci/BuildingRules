{% extends "layout.html" %}
{% block body %}
  {% if session.logged_in %}

  <script type="text/javascript" src="{{ url_for('static', filename='js/ruleForm.js') }}"></script>
  <script>
  window.onload = function(){
    init();
  };
  </script>

  	{% if rule %}
		<h3>Rule Editing!</h3>
	{% else %}
		<h3>Add a new rule!</h3>
	{% endif %}
	<br>

	{% if insertionForGroup %}
		<p>This form let you to add a rule to the choosen group.</p>
	{% endif %}

	{% if insertionForRoom %}
		<p>This form let you to add a rule to the choosen room.</p>
	{% endif %}


	<br>



	<form class="form-horizontal" action="{{request.path}}" method="POST">

	  <div class="control-group">
	    <label class="control-label" for="ruleBody">Your new rule</label>
	    <div class="controls">
	      <input readonly type="text" id="ruleBody" name="ruleBody"  class="span5" placeholder="" value="{% if rule %} if {{rule.antecedent}} then {{rule.consequent}} {% endif %}" onclick="ruleBodyAlert();">
	    

              <h3 class="muted">IF</h3>
              <select name="trigger_0" id="trigger_0" onchange="triggerSelected(0)">
                <option>Select a trigger</option>
                <option value="someone is in the room the room">someone is in the room</option><option value="nobody is in the room in the room ">nobody is in the room</option><option value="room temperature is between">room temperature is between</option><option value="external temperature is between">external temperature is between</option><option value="time is between">time is between</option><option value="the date is between">the date is between</option><option value="today is">today is</option><option value="it is sunny">it is sunny</option><option value="it is rainy">it is rainy</option><option value="it is rainy">it is cloudy</option>
                {% if insertionForGroup %}
                  <option>no rule specified</option>
                {% endif  %}
                
              </select>

              <div id="temperature_box_0">
                <select name="temperature_from_0" id="temperature_from_0">
                  <option> - </option><option>60F</option><option>61F</option><option>62F</option><option>63F</option><option>64F</option><option>65F</option><option>66F</option><option>67F</option><option>68F</option><option>69F</option><option>70F</option><option>71F</option><option>72F</option><option>73F</option><option>74F</option><option>75F</option><option>76F</option><option>77F</option><option>78F</option><option>79F</option><option>80F</option><option>81F</option><option>82F</option><option>83F</option>
                </select>
                <h4 class="muted">and</h4> 
                <select name="temperature_to_0" id="temperature_to_0">
                  <option> - </option><option>60F</option><option>61F</option><option>62F</option><option>63F</option><option>64F</option><option>65F</option><option>66F</option><option>67F</option><option>68F</option><option>69F</option><option>70F</option><option>71F</option><option>72F</option><option>73F</option><option>74F</option><option>75F</option><option>76F</option><option>77F</option><option>78F</option><option>79F</option><option>80F</option><option>81F</option><option>82F</option><option>83F</option>
                </select>
              </div>

              <div id="time_box_0">
                <select name="time_from_0" id="time_from_0">
                  <option> - </option><option>00.00</option><option>01.00</option><option>02.00</option><option>03.00</option><option>04.00</option><option>05.00</option><option>06.00</option><option>07.00</option><option>08.00</option><option>09.00</option><option>10.00</option><option>11.00</option><option>12.00</option><option>13.00</option><option>14.00</option><option>15.00</option><option>16.00</option><option>17.00</option><option>18.00</option><option>19.00</option><option>20.00</option><option>21.00</option><option>22.00</option><option>23.00</option>
                </select>
                <h4 class="muted">and</h4>  
                <select name="time_to_0" id="time_to_0">
                  <option> - </option><option>00.00</option><option>01.00</option><option>02.00</option><option>03.00</option><option>04.00</option><option>05.00</option><option>06.00</option><option>07.00</option><option>08.00</option><option>09.00</option><option>10.00</option><option>11.00</option><option>12.00</option><option>13.00</option><option>14.00</option><option>15.00</option><option>16.00</option><option>17.00</option><option>18.00</option><option>19.00</option><option>20.00</option><option>21.00</option><option>22.00</option><option>23.00</option>
                </select>
              </div>

              <div id="day_box_0">
                <select name="day_0" id="day_0">
                  <option> - </option><option>Sunday</option><option>Monday</option><option>Tuesday</option><option>Wednesday</option><option>Thursday</option><option>Friday</option><option>Saturday</option>
                </select>
              </div>

              <div id="date_box_0">
                <select name="date_day_from_0" id="date_day_from_0">
                  <option> Day </option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option><option>11</option><option>12</option><option>13</option><option>14</option><option>15</option><option>16</option><option>17</option><option>18</option><option>19</option><option>20</option><option>21</option><option>22</option><option>23</option><option>24</option><option>25</option><option>26</option><option>27</option><option>28</option><option>29</option><option>30</option><option>31</option>
                </select>
                <select name="date_month_from_0" id="date_month_from_0">
                  <option> Month </option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option><option>11</option><option>12</option>
                </select>
                <h4 class="muted">and</h4>  
                <select name="date_day_to_0" id="date_day_to_0">
                  <option> Day </option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option><option>11</option><option>12</option><option>13</option><option>14</option><option>15</option><option>16</option><option>17</option><option>18</option><option>19</option><option>20</option><option>21</option><option>22</option><option>23</option><option>24</option><option>25</option><option>26</option><option>27</option><option>28</option><option>29</option><option>30</option><option>31</option>
                </select>
                <select name="date_month_to_0" id="date_month_to_0">
                  <option> Month </option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option><option>11</option><option>12</option>
                </select>


              </div>


              <h3 class="muted">THEN</h3>

              <select name="action_0" id="action_0" onchange="compose()">
                <option>Select an action</option><option>turn on the light</option><option>turn off the light</option><option>turn on the heating</option><option>turn off the heating</option><option>turn on the cooling</option><option>turn off the cooling</option><option>open the windows</option><option>close the windows</option><option>open the curtains</option><option>close the curtains</option>
              </select>  
              <a href="javascript:compose();"><button class="btn" type="button">Compose the rule!</button></a>

      </div>
	  </div>

    <br>
    <br>
    <br>

	  
          

	  <div class="control-group">
	    <label class="control-label" for="priority">Rule priority</label>
	    <div class="controls">

			{% if insertionForGroup %}
				<bold class="muted">LOW</bold> <input type="range" min ="0" max="200" name="priority" id="priority" value="{% if rule %}{{rule.priority}}{% endif %}" onchange="updatePriority(this.value);"> <bold class="muted">HIGH</bold>
        <input type="text" name="priorityTextBox" id="priorityTextBox" readonly="" class="input-small" value="{% if rule %}{{rule.priority}}{% else %}100{% endif %}">
			{% endif %}

			{% if insertionForRoom %}
				<bold class="muted">LOW</bold> <input type="range" min ="0" max="100" name="priority" id="priority" value="{% if rule %}{{rule.priority}}{% endif %}" onchange="updatePriority(this.value);"> <bold class="muted">HIGH</bold>
        <input type="text" name="priorityTextBox" id="priorityTextBox" readonly="" class="input-small" value="{% if rule %}{{rule.priority}}{% else %}50{% endif %}">
			{% endif %}
      
			<br>
			<small class="muted"><b>Allowed priority values:</b></small>
			{% if insertionForGroup %}
				<br>
				<small class="muted">Group priority: [0-200]</small>
			{% endif %}
			<br>
			<small class="muted">Room priority: [0-100]</small>

	    </div>
	  </div>

	  <div class="control-group">
	    <div class="controls">
      {% if rule %}
	      <button type="submit" class="btn btn-large btn-primary">Save the modifications!</button>
      {% else %}
        <button type="submit" class="btn btn-large btn-primary">Save the new rule!</button>
      {% endif %}
	    </div>
	 </div>

	</form>

	<br>
	<br>




  {% endif %}
{% endblock %}
